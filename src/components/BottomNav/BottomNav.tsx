import t from '../../locales/ru.json';

interface BottomNavProps {
  activeTab: string;
  onTabChange: (tab: string) => void;
  sponsorUnlocked?: boolean;
}

const HomeIcon = () => (
  <svg
    width="12"
    height="15"
    viewBox="0 0 12 15"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path
      d="M0 13.2857V5.57143C0 5.3 0.0532499 5.04286 0.15975 4.8C0.26625 4.55714 0.413 4.35714 0.6 4.2L5.1 0.342857C5.3625 0.114286 5.6625 0 6 0C6.3375 0 6.6375 0.114286 6.9 0.342857L11.4 4.2C11.5875 4.35714 11.7345 4.55714 11.841 4.8C11.9475 5.04286 12.0005 5.3 12 5.57143V13.2857C12 13.7571 11.853 14.1609 11.559 14.4969C11.265 14.8329 10.912 15.0006 10.5 15H8.25C8.0375 15 7.8595 14.9177 7.716 14.7531C7.5725 14.5886 7.5005 14.3851 7.5 14.1429V9.85714C7.5 9.61428 7.428 9.41086 7.284 9.24686C7.14 9.08286 6.962 9.00057 6.75 9H5.25C5.0375 9 4.8595 9.08228 4.716 9.24686C4.5725 9.41143 4.5005 9.61485 4.5 9.85714V14.1429C4.5 14.3857 4.428 14.5894 4.284 14.754C4.14 14.9186 3.962 15.0006 3.75 15H1.5C1.0875 15 0.7345 14.8323 0.441 14.4969C0.1475 14.1614 0.0005 13.7577 0 13.2857Z"
      fill="currentColor"
    />
  </svg>
);

const WithdrawIcon = () => (
  <svg
    width="17"
    height="17"
    viewBox="0 0 17 17"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path
      d="M5.34211 1H9.28948C9.60355 1 9.90476 1.12476 10.1268 1.34685C10.3489 1.56893 10.4737 1.87014 10.4737 2.18421C10.4737 2.91705 10.1826 3.61986 9.66438 4.13806C9.14618 4.65625 8.44336 4.94737 7.71053 4.94737H6.92106C6.18822 4.94737 5.4854 4.65625 4.96721 4.13806C4.44902 3.61986 4.1579 2.91705 4.1579 2.18421C4.1579 1.87014 4.28266 1.56893 4.50474 1.34685C4.72683 1.12476 5.02804 1 5.34211 1Z"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    />
    <path
      d="M7.71053 15.2105H4.15789C3.32037 15.2105 2.51715 14.8778 1.92493 14.2856C1.33271 13.6934 1 12.8902 1 12.0526V11.2632C0.999655 9.87029 1.45976 8.51637 2.30872 7.41212C3.15767 6.30787 4.34785 5.51524 5.69401 5.15757C7.04018 4.79991 8.46682 4.89729 9.75191 5.43454C11.037 5.9718 12.1084 6.9188 12.7995 8.12816M10.4737 13.6316H15.2105M15.2105 13.6316L12.8421 11.2632M15.2105 13.6316L12.8421 16"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    />
    <path
      d="M7.06943 7.92847V8.19897C7.05772 8.19879 7.046 8.198 7.03427 8.198C7.02235 8.198 7.01003 8.19878 6.99814 8.19897V7.92847H7.06943ZM6.99814 12.3708C7.01004 12.371 7.02235 12.3728 7.03427 12.3728C7.04601 12.3728 7.05771 12.371 7.06943 12.3708V12.6423H6.99814V12.3708Z"
      stroke="currentColor"
    />
  </svg>
);

const SponsorIcon = () => (
  <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M8.09127 10.4759L8.15463 9.58893L8.92741 9.14794C9.66965 8.7183 10.3514 8.19184 10.9548 7.58239C13.1556 5.38079 13.8275 2.79238 13.0181 1.9821C12.2078 1.17348 9.61933 1.84371 7.4177 4.04532C6.78413 4.67888 6.25311 5.37079 5.85213 6.0727L5.4103 6.84547L4.52414 6.90883C3.79689 6.95964 3.10676 7.24917 2.56093 7.73245C3.60279 8.19125 4.5501 8.84003 5.35445 9.64562C6.17141 10.4626 6.81498 11.4104 7.26764 12.4391C7.75092 11.8933 8.04045 11.2032 8.09127 10.4759ZM5.61287 12.8342C5.44447 13.0616 5.25974 13.2764 5.06017 13.477C4.08315 14.454 2.60928 14.7485 0.638565 14.3606C0.252314 12.3905 0.546866 10.9169 1.52222 9.93989C1.72896 9.73426 1.94348 9.55003 2.16579 9.3872C1.48226 9.05364 0.751982 8.82596 0 8.71196C0.242891 7.95232 0.663914 7.26177 1.22795 6.69792C2.07705 5.84702 3.20502 5.3316 4.4041 5.24657C4.90713 4.37539 5.52388 3.57503 6.2381 2.86657C9.00577 0.0989336 12.5687 -0.82389 14.1968 0.803348C15.8241 2.43142 14.9004 5.99434 12.1336 8.76114C11.4251 9.47535 10.6247 10.0921 9.75355 10.5951C9.66852 11.7942 9.15309 12.9221 8.30219 13.7712C7.73923 14.3366 7.0484 14.7581 6.28812 15C6.17412 14.248 5.94643 13.5178 5.61287 12.8342ZM4.17485 10.8252C4.04061 10.6906 3.88926 10.5743 3.72469 10.4792C3.36456 10.6043 2.94107 10.8794 2.55343 11.2662C2.37086 11.4496 2.14745 12.0656 2.14495 12.8542C2.93357 12.8517 3.55212 12.6258 3.73302 12.4458C4.12066 12.0573 4.39576 11.6347 4.51998 11.2745C4.42515 11.11 4.30912 10.9587 4.17485 10.8244V10.8252ZM10.6589 4.33959C10.5774 4.26312 10.5122 4.17107 10.4671 4.06891C10.4219 3.96674 10.3977 3.85654 10.396 3.74485C10.3943 3.63316 10.415 3.52226 10.457 3.41874C10.4989 3.31522 10.5613 3.22119 10.6403 3.14223C10.7193 3.06328 10.8134 3.001 10.9169 2.95911C11.0205 2.91723 11.1314 2.89657 11.2431 2.89839C11.3548 2.9002 11.4649 2.92444 11.5671 2.96967C11.6692 3.0149 11.7612 3.08019 11.8376 3.16168C11.9814 3.3202 12.0587 3.52793 12.0535 3.74186C12.0483 3.95578 11.961 4.15952 11.8097 4.31089C11.6585 4.46226 11.4548 4.54966 11.2409 4.555C11.027 4.56034 10.8192 4.48322 10.6605 4.33959H10.6589Z" fill="currentColor" />
  </svg>
);

function BottomNav({ activeTab, onTabChange, sponsorUnlocked }: BottomNavProps) {
  const tabs = [
    ...(sponsorUnlocked ? [{ id: 'sponsor', label: t.nav.sponsor, Icon: SponsorIcon, badge: 85 }] : []),
    { id: 'home', label: t.nav.home, Icon: HomeIcon, badge: undefined },
    { id: 'withdraw', label: t.nav.withdraw, Icon: WithdrawIcon, badge: undefined },
  ];

  return (
    <nav className="fixed bottom-0 inset-x-0 mx-auto flex justify-center items-center gap-[clamp(30px,10vw,80px)] h-[clamp(70px,18vw,90px)] bg-[#130402] pb-[env(safe-area-inset-bottom,0px)] z-[100]">
      {tabs.map(({ id, label, Icon, badge }) => {
        const isActive = activeTab === id;
        return (
          <button
            key={id}
            className="flex flex-col items-center justify-center gap-1 transition-opacity duration-150 active:scale-95 relative"
            style={{ color: isActive ? '#ffdb00' : 'rgba(255,255,255,0.7)' }}
            onClick={() => onTabChange(id)}
          >
            <div className="relative">
              <Icon />
              {badge !== undefined && (
                <span className="absolute -top-3 -right-8 bg-[#ffdb00] text-black font-inter font-bold text-[12px] leading-[125%] w-[30px] h-[18px] rounded-[9px] flex items-center justify-center">
                  {badge}
                </span>
              )}
            </div>
            <span className="font-inter font-bold text-[clamp(11px,1.5vw,14px)] leading-[107%]">
              {label}
            </span>
          </button>
        );
      })}
    </nav>
  );
}

export default BottomNav;
